<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C# to JSON Converter</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1400px;
        }
        textarea {
            resize: vertical;
            height: 85vh; /* Alterado para 65% da altura da viewport */
            min-height: 200px; /* Adicionado para garantir uma altura m√≠nima em telas pequenas */
        }
        .conversion-controls {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        @media (min-width: 768px) {
            .row {
                justify-content: center;
            }
            .col-md-5 {
                flex: 0 0 45%;
                max-width: 45%;
            }
            .conversion-controls {
                flex: 0 0 10%;
                max-width: 10%;
            }
        }
        @media (max-width: 767px) {
            .conversion-controls {
                margin: 20px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">C# to JSON Converter</h1>
        <div class="row">
            <div class="col-md-5 mb-3">
                <textarea id="inputText" class="form-control" placeholder="Enter C# class or JSON here"></textarea>
            </div>
            <div class="col-md-2 conversion-controls">
                <select id="conversionType" class="form-control mb-3">
                    <option value="csharpToJson">C# to JSON</option>
                    <option value="jsonToCsharp">JSON to C#</option>
                </select>
                <button id="convertBtn" class="btn btn-primary">
                    Convert
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2">
                        <path d="M17 1l4 4-4 4"></path>
                        <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                        <path d="M7 23l-4-4 4-4"></path>
                        <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
                    </svg>
                </button>
            </div>
            <div class="col-md-5 mb-3">
                <textarea id="outputText" class="form-control" readonly placeholder="Conversion result"></textarea>
            </div>
        </div>
    </div>

    <script>
        function convertCSharpToJson(csharp) {
            const lines = csharp.split('\n');
            const jsonObj = {};

            lines.forEach(line => {
                const match = line.match(/public\s+(\w+)\s+(\w+)\s*{\s*get;\s*set;\s*}/);
                if (match) {
                    const [, type, name] = match;
                    jsonObj[name] = type === 'string' ? '' : type === 'int' ? 0 : null;
                }
            });

            return JSON.stringify(jsonObj, null, 2);
        }

        function convertJsonToCSharp(json) {
            try {
                const obj = JSON.parse(json);
                let csharp = 'public class MyClass\n{\n';

                Object.entries(obj).forEach(([key, value]) => {
                    const type = typeof value === 'string' ? 'string' : typeof value === 'number' ? 'int' : 'object';
                    csharp += `    public ${type} ${key} { get; set; }\n`;
                });

                csharp += '}';
                return csharp;
            } catch (error) {
                return 'Invalid JSON';
            }
        }

        document.getElementById('convertBtn').addEventListener('click', () => {
            const inputText = document.getElementById('inputText').value;
            const conversionType = document.getElementById('conversionType').value;
            const outputText = document.getElementById('outputText');

            if (conversionType === 'csharpToJson') {
                outputText.value = convertCSharpToJson(inputText);
            } else {
                outputText.value = convertJsonToCSharp(inputText);
            }
        });

        document.getElementById('conversionType').addEventListener('change', (e) => {
            const inputText = document.getElementById('inputText');
            inputText.placeholder = e.target.value === 'csharpToJson' ? 'Enter C# class here' : 'Enter JSON here';
        });
    </script>
</body>
</html>
